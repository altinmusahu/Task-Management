(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function h(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(n){if(n.ep)return;n.ep=!0;const o=h(n);fetch(n.href,o)}})();document.addEventListener("DOMContentLoaded",f=>{const i=document.getElementById("taskTableBody"),h=document.getElementById("addTaskForm"),l=document.getElementById("taskTitle"),n=document.getElementById("taskDescription"),o=document.getElementById("searchInput");let s=[];const y=()=>{fetch("https://jsonplaceholder.typicode.com/posts").then(t=>t.json()).then(t=>{s=t.map(e=>({...e,status:!1})),p(s),console.log(s)}).catch(t=>console.error("Error fetching tasks:",t))},p=t=>{i.innerHTML="",t.forEach(e=>i.appendChild(E(e)))},E=t=>{const e=document.createElement("tr");e.setAttribute("data-id",t.id);const c=document.createElement("td");c.textContent=t.title,e.appendChild(c);const r=document.createElement("td");r.textContent=t.body||"No description provided",e.appendChild(r);const d=document.createElement("td");d.textContent=t.status?"Completed":"Pending",d.className=t.status?"text-success":"text-danger",e.appendChild(d);const a=document.createElement("td"),u=document.createElement("button");u.className="btn btn-primary btn-sm mr-2",u.textContent="Update",u.setAttribute("data-button",t.id),u.onclick=()=>g(t.id);const m=document.createElement("button");return m.className="btn btn-danger btn-sm",m.textContent="Delete",m.onclick=()=>T(t.id),a.appendChild(u),a.appendChild(m),e.appendChild(a),e};h.addEventListener("submit",t=>{t.preventDefault();const e=l.value.trim(),c=n.value.trim();e!==""&&fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,body:c,userId:1})}).then(r=>r.json()).then(r=>{r.status=!1,s.push(r),p(s),l.value="",n.value=""}).catch(r=>console.error("Error adding task:",r))});const g=t=>{const c=document.querySelector(`[data-id="${t}"]`).querySelector("td:nth-child(3)"),d={status:!(c.textContent==="Completed")};fetch(`https://jsonplaceholder.typicode.com/posts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(a=>a.json()).then(()=>{c.textContent=d.status?"Completed":"Pending",c.className=d.status?"text-success":"text-danger"}).catch(a=>console.error("Error updating task:",a))},T=t=>{fetch(`https://jsonplaceholder.typicode.com/posts/${t}`,{method:"DELETE"}).then(()=>{s=s.filter(e=>e.id!==t),p(s)}).catch(e=>console.error("Error deleting task:",e))};o.addEventListener("input",t=>{const e=t.target.value.toLowerCase(),c=s.filter(r=>r.title.toLowerCase().includes(e));p(c)}),y()});
